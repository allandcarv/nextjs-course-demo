{"ast":null,"code":"import { MongoClient } from 'mongodb'; // /api/new-meetup\n\nasync function handler(req, res) {\n  const requests = {\n    POST: async () => {\n      const data = req.body;\n      const {\n        title,\n        image,\n        address,\n        description\n      } = data;\n      const client = new MongoClient('mongodb+srv://react-course:react-course-pass@cluster0.7s65w.mongodb.net/meetups?retryWrites=true&w=majority');\n      client.connect();\n      const db = client.db();\n      const meetupsCollection = db.collection('meetups');\n      const result = await meetupsCollection.insertOne({\n        title,\n        image,\n        address,\n        description\n      });\n      console.log('result', result);\n      client.close();\n      res.status(201).json({\n        message: 'Meetup inserted'\n      });\n    }\n  };\n  const callback = requests[req.method] || null;\n\n  if (!callback) {\n    return res.status(400).json({\n      error: 'Method not allowed for this endpoint'\n    });\n  }\n\n  return requests[req.method]();\n}\n\nexport default handler;","map":{"version":3,"sources":["/Users/allan.carvalho/workspace/courses/react/complete-guide/section-23_next-js/nextjs-project/pages/api/new-meetup.js"],"names":["MongoClient","handler","req","res","requests","POST","data","body","title","image","address","description","client","connect","db","meetupsCollection","collection","result","insertOne","console","log","close","status","json","message","callback","method","error"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B,C,CAEA;;AAEA,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC7B,QAAMC,QAAQ,GAAG;AACbC,IAAAA,IAAI,EAAE,YAAY;AACd,YAAMC,IAAI,GAAGJ,GAAG,CAACK,IAAjB;AAEA,YAAM;AAAEC,QAAAA,KAAF;AAASC,QAAAA,KAAT;AAAgBC,QAAAA,OAAhB;AAAyBC,QAAAA;AAAzB,UAAyCL,IAA/C;AAEA,YAAMM,MAAM,GAAG,IAAIZ,WAAJ,CAAgB,6GAAhB,CAAf;AAEAY,MAAAA,MAAM,CAACC,OAAP;AAEA,YAAMC,EAAE,GAAGF,MAAM,CAACE,EAAP,EAAX;AAEA,YAAMC,iBAAiB,GAAGD,EAAE,CAACE,UAAH,CAAc,SAAd,CAA1B;AAEA,YAAMC,MAAM,GAAG,MAAMF,iBAAiB,CAACG,SAAlB,CAA4B;AAAEV,QAAAA,KAAF;AAASC,QAAAA,KAAT;AAAgBC,QAAAA,OAAhB;AAAyBC,QAAAA;AAAzB,OAA5B,CAArB;AAEAQ,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBH,MAAtB;AAEAL,MAAAA,MAAM,CAACS,KAAP;AAEAlB,MAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAArB;AACH;AArBY,GAAjB;AAyBA,QAAMC,QAAQ,GAAGrB,QAAQ,CAACF,GAAG,CAACwB,MAAL,CAAR,IAAwB,IAAzC;;AAEA,MAAI,CAACD,QAAL,EAAe;AACX,WAAOtB,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEI,MAAAA,KAAK,EAAE;AAAT,KAArB,CAAP;AACH;;AAED,SAAOvB,QAAQ,CAACF,GAAG,CAACwB,MAAL,CAAR,EAAP;AACH;;AAED,eAAezB,OAAf","sourcesContent":["import { MongoClient } from 'mongodb';\n\n// /api/new-meetup\n\nasync function handler(req, res) {\n    const requests = {\n        POST: async () => {\n            const data = req.body;\n\n            const { title, image, address, description } = data;\n\n            const client = new MongoClient('mongodb+srv://react-course:react-course-pass@cluster0.7s65w.mongodb.net/meetups?retryWrites=true&w=majority')\n\n            client.connect();\n\n            const db = client.db();\n\n            const meetupsCollection = db.collection('meetups');\n\n            const result = await meetupsCollection.insertOne({ title, image, address, description });\n\n            console.log('result', result);\n\n            client.close();\n\n            res.status(201).json({ message: 'Meetup inserted' });\n        }\n        \n    }\n\n    const callback = requests[req.method] || null;\n\n    if (!callback) {\n        return res.status(400).json({ error: 'Method not allowed for this endpoint'});\n    }\n\n    return requests[req.method]();\n}\n\nexport default handler;"]},"metadata":{},"sourceType":"module"}